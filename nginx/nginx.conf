worker_processes 1;

events { worker_connections 1024; }

http {
    include       mime.types;
    default_type  application/octet-stream;
    sendfile        on;
    keepalive_timeout  65;

    server {
        listen 80;

        # Spark Master UI
        location /spark-master/ {
            proxy_pass http://spark-master:8080/;
            proxy_set_header Host $host;
        }

        # Spark Worker 1 UI
        location /spark-worker-1/ {
            proxy_pass http://spark-worker-1:8081/;
            proxy_set_header Host $host;
        }

        # Spark Worker 2 UI
        location /spark-worker-2/ {
            proxy_pass http://spark-worker-2:8082/;
            proxy_set_header Host $host;
        }

        # PgAdmin
        location /pgadmin/ {
            proxy_pass http://pgadmin:80/;
            proxy_set_header Host $host;
        }

        # Hive Metastore (UI if any)
        location /hive-metastore/ {
            proxy_pass http://hive-metastore:9083/;
            proxy_set_header Host $host;
        }

        # Hive Server (UI if any)
        location /hive-server/ {
            proxy_pass http://hive-server:10000/;
            proxy_set_header Host $host;
        }

        # Kafka (not HTTP, placeholder)
        location /kafka/ {
            return 501 'Kafka does not support HTTP proxying.';
        }
    }
}

